(window.webpackJsonpplanningpoker=window.webpackJsonpplanningpoker||[]).push([[0],{19:function(e,t,n){e.exports=n(42)},24:function(e,t,n){},25:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=(n(24),n(1)),l=n(2),u=(n(25),function(e){var t=e.children,n=e.color,r=e.onClick,o=e.size;return a.a.createElement("div",{className:"card",style:{width:o||150,height:o||150,flex:1,justifyContent:"center",alignItems:"center",margin:8,background:n||"#fff",display:"inline-block"},onClick:r},t)});function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f,v=function(e){var t=e.ownId,n=e.users,r=Object.keys(n).filter((function(e){return!!n[e]&&!!n[e].value})).length===Object.keys(n).length,o=function(e){return e===t},c=Object.keys(n).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n[e],{key:e})})),l=r?function(e){return e.sort((function(e,t){if(!e.value)return-1;if(!t.value)return 1;var n=parseInt(e.value);if(isNaN(n))return 1;var r=parseInt(t.value);return isNaN(r)?-1:n-r}))}(c):c,f=l[0].value,v=l[l.length-1].value;return a.a.createElement("div",null,l.map((function(e){var t,c=e.value===f,i=e.value===v;return a.a.createElement(u,{key:e.key,color:o(e.key)?"#c3f7f7":void 0},a.a.createElement("div",null,a.a.createElement("div",{style:{padding:16,wordWrap:"break-word",height:"1em",lineHeight:"1em",overflow:"hidden"}},e.name),a.a.createElement("div",{style:{fontSize:80,color:r&&(c||i)?"red":"black"}},(t=e.key,n&&n[t]&&void 0!==n[t].value?o(t)?n[t].value:r?n[t].value:"?":"_"))))})))},d=[{value:"0",color:"#fff"},{value:"1",color:"#afa"},{value:"2",color:"#5f5"},{value:"3",color:"yellow"},{value:"5",color:"orange"},{value:"8",color:"red"},{value:"13",color:"violet"},{value:"20",color:"#bbb"},{value:"\ud83e\udd14",color:"#fff"}],m=function(e){var t=e.currentSelection,n=e.onClick;return a.a.createElement("div",null,d.map((function(e){var r=e.value,o=e.color;return a.a.createElement(u,{key:r,color:t?t===r?o:"white":o,size:50,onClick:function(){return n(r)}},a.a.createElement("div",{style:{height:50,fontSize:35,display:"flex",alignItems:"center",justifyContent:"center"}},r))})))},b=n(17),p=n.n(b);!function(e){e.CurrentValue="current_value",e.Leave="leave",e.RequestCurrentValue="request_current_value",e.Reset="reset",e.AdminSet="admin_set"}(f||(f={}));var O=n(8),y=n.n(O),g=n(18);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=new p.a(4).format(),h=function(e,t,n){var r={type:f.CurrentValue,clientId:w,name:t,value:n};e.send(JSON.stringify(r))},E=Object(g.addUrlProps)({mapUrlToProps:function(e){return{room:e.room}}})((function(e){var t=e.room,n=void 0===t?"default":t,o=Object(r.useState)(!0),c=Object(l.a)(o,2),u=c[0],s=c[1],d=Object(r.useState)(!1),b=Object(l.a)(d,2),p=b[0],O=b[1],g=Object(r.useState)(!0),j=Object(l.a)(g,2),E=j[0],S=j[1],P=Object(r.useState)(Object(i.a)({},w,{name:localStorage.getItem("name")||"",value:void 0})),C=Object(l.a)(P,2),I=C[0],N=C[1],D=I[w],J=D.name,A=D.value,R=Object(r.useMemo)((function(){return new WebSocket("wss://connect.websocket.in/PlanningPokerApp?room_id=".concat(n))}),[n]),x=Object(r.useCallback)((function(e,t){h(R,e,t),N((function(n){return k({},n,Object(i.a)({},w,{name:e,value:t}))}))}),[R]),V=function(){N((function(e){return y()(e).toPairs().reduce((function(e,t){var n=Object(l.a)(t,2),r=n[0],a=n[1];return k({},e,Object(i.a)({},r,k({},a,{value:void 0})))}),{})}))},_=Object(r.useCallback)((function(){p?(O(!1),R.send(JSON.stringify({type:f.AdminSet,clientId:""}))):(O(!0),R.send(JSON.stringify({type:f.AdminSet,clientId:w}))),h(R,J,A)}),[p,J,R,A]);return Object(r.useEffect)((function(){window.onunload=function(){R.send(JSON.stringify({type:f.Leave,clientId:w}))}}),[R]),Object(r.useEffect)((function(){R.onopen=function(){s(!1),R.send(JSON.stringify({type:f.RequestCurrentValue})),h(R,J,A)},R.onmessage=function(e){var t=JSON.parse(e.data);if(t.type)switch(t.type){case f.CurrentValue:N((function(e){return k({},e,Object(i.a)({},t.clientId,{name:t.name,value:t.value}))}));break;case f.Leave:var n=t.clientId,r=y()(I).toPairs().filter((function(e){return Object(l.a)(e,1)[0]!==n})).reduce((function(e,t){var n=Object(l.a)(t,2),r=n[0],a=n[1];return k({},e,Object(i.a)({},r,k({},a,{value:void 0})))}),{});N(r);break;case f.RequestCurrentValue:h(R,J,A);break;case f.Reset:V();break;case f.AdminSet:var a=t.clientId;a!==w&&(""===a?S(!0):(O(!1),S(!1)));break;default:return}},R.onclose=function(e){}}),[J,R,I,A]),u?a.a.createElement("header",null,"Loading ..."):a.a.createElement("div",{className:"App"},E&&a.a.createElement("div",{style:{marginTop:10}},a.a.createElement("input",{type:"checkbox",id:"adminCheckbox",checked:p,onClick:_}),"Ich bin ein Administrator"),a.a.createElement("div",{style:{flexDirection:"row",margin:16}},a.a.createElement("label",null,a.a.createElement("strong",null,"Dein Name:"),a.a.createElement("input",{className:"Input",style:{marginLeft:16},value:J,onChange:function(e){var t=e.target.value;localStorage.setItem("name",t),x(t,A)}}))),a.a.createElement(m,{currentSelection:A,onClick:function(e){return x(J,e)}}),a.a.createElement(v,{ownId:w,users:I}),p&&a.a.createElement("div",{style:{marginTop:50}},a.a.createElement("button",{onClick:function(){R.send(JSON.stringify({type:f.Reset})),V()}},"Reset")))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.87b338e6.chunk.js.map